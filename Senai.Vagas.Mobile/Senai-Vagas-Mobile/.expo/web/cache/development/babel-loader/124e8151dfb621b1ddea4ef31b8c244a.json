{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\senai\\\\Desktop\\\\Senai.Vagas.Mobile\\\\Senai-Vagas-Mobile\\\\src\\\\screens\\\\login\\\\Login.tsx\";\nimport React, { useState } from 'react';\nimport { StackActions, NavigationActions } from 'react-navigation';\nimport StatusBar from \"react-native-web/dist/exports/StatusBar\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport { AsyncStorage } from \"react-native-web/dist/index\";\nimport PropTypes from 'prop-types';\nimport api from \"../../services/api\";\nimport { Container, Title, TextInformation, Error, Form, Input, Button, ButtonText } from \"./styles\";\nexport default function Welcome(props) {\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      username = _useState2[0],\n      setUsername = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      password = _useState4[0],\n      setPassword = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      loading = _useState6[0],\n      setLoading = _useState6[1];\n\n  var _useState7 = useState(null),\n      _useState8 = _slicedToArray(_useState7, 2),\n      errorMessage = _useState8[0],\n      setErrorMessage = _useState8[1];\n\n  function saveUser(user) {\n    return _regeneratorRuntime.async(function saveUser$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(AsyncStorage.setItem('@ListApp:userToken', JSON.stringify(user)));\n\n          case 2:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  function signIn() {\n    var credentials, response, user, resetAction;\n    return _regeneratorRuntime.async(function signIn$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            if (!(username.length === 0)) {\n              _context2.next = 2;\n              break;\n            }\n\n            return _context2.abrupt(\"return\");\n\n          case 2:\n            setLoading(true);\n            _context2.prev = 3;\n            credentials = {\n              email: username,\n              password: password\n            };\n            _context2.next = 7;\n            return _regeneratorRuntime.awrap(api.post('/sessions', credentials));\n\n          case 7:\n            response = _context2.sent;\n            user = response.data;\n            _context2.next = 11;\n            return _regeneratorRuntime.awrap(saveUser(user));\n\n          case 11:\n            resetAction = StackActions.reset({\n              index: 0,\n              actions: [NavigationActions.navigate({\n                routeName: 'App'\n              })]\n            });\n            setLoading(false);\n            props.navigation.dispatch(resetAction);\n            _context2.next = 21;\n            break;\n\n          case 16:\n            _context2.prev = 16;\n            _context2.t0 = _context2[\"catch\"](3);\n            console.log(_context2.t0);\n            setLoading(false);\n            setErrorMessage('Usuário não existe');\n\n          case 21:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, [[3, 16]], Promise);\n  }\n\n  return React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 5\n    }\n  }, React.createElement(StatusBar, {\n    barStyle: \"light-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }\n  }), React.createElement(Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }\n  }, \"Bem-vindo\"), React.createElement(TextInformation, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }\n  }, \"Para continuar, precisamos que voc\\xEA informe seu usu\\xE1rio\"), !!errorMessage && React.createElement(Error, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 26\n    }\n  }, errorMessage), React.createElement(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }\n  }, React.createElement(Input, {\n    autoCapitalize: \"none\",\n    autoCorrect: false,\n    placeholder: \"Digite seu usu\\xE1rio\",\n    underlineColorAndroid: \"rgba(0, 0, 0, 0)\",\n    value: username,\n    onChangeText: function onChangeText(username) {\n      return setUsername(username);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }\n  }), React.createElement(Input, {\n    autoCapitalize: \"none\",\n    autoCorrect: false,\n    placeholder: \"Digite sua senha\",\n    underlineColorAndroid: \"rgba(0, 0, 0, 0)\",\n    secureTextEntry: true,\n    value: password,\n    onChangeText: function onChangeText(password) {\n      return setPassword(password);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }\n  }), React.createElement(Button, {\n    onPress: signIn,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }\n  }, loading ? React.createElement(ActivityIndicator, {\n    size: \"small\",\n    color: \"#FFF\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }\n  }) : React.createElement(ButtonText, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }\n  }, \"Prosseguir\"))));\n}\n\nWelcome.navigationOptions = function () {\n  return {\n    header: null\n  };\n};\n\nWelcome.propTypes = {\n  navigation: PropTypes.shape({\n    dispatch: PropTypes.func\n  }).isRequired\n};","map":{"version":3,"sources":["C:/Users/senai/Desktop/Senai.Vagas.Mobile/Senai-Vagas-Mobile/src/screens/login/Login.tsx"],"names":["React","useState","StackActions","NavigationActions","AsyncStorage","PropTypes","api","Container","Title","TextInformation","Error","Form","Input","Button","ButtonText","Welcome","props","username","setUsername","password","setPassword","loading","setLoading","errorMessage","setErrorMessage","saveUser","user","setItem","JSON","stringify","signIn","length","credentials","email","post","response","data","resetAction","reset","index","actions","navigate","routeName","navigation","dispatch","console","log","navigationOptions","header","propTypes","shape","func","isRequired"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\r\nimport { StackActions, NavigationActions } from 'react-navigation'\r\nimport { StatusBar, ActivityIndicator, AsyncStorage } from 'react-native'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport api from '../../services/api'\r\n\r\nimport {\r\n  Container,\r\n  Title,\r\n  TextInformation,\r\n  Error,\r\n  Form,\r\n  Input,\r\n  Button,\r\n  ButtonText,\r\n} from './styles'\r\n\r\nexport default function Welcome(props) {\r\n  const [username, setUsername] = useState('')\r\n  const [password, setPassword] = useState('')\r\n  const [loading, setLoading] = useState(false)\r\n  const [errorMessage, setErrorMessage] = useState(null)\r\n\r\n  async function saveUser(user) {\r\n    await AsyncStorage.setItem('@ListApp:userToken', JSON.stringify(user))\r\n  }\r\n\r\n  async function signIn() {\r\n    if (username.length === 0) return\r\n\r\n    setLoading(true)\r\n\r\n    try {\r\n\r\n      const credentials = {\r\n        email: username,\r\n        password: password\r\n      }\r\n\r\n      const response = await api.post('/sessions', credentials)\r\n\r\n      const user = response.data\r\n\r\n      await saveUser(user)\r\n\r\n      const resetAction = StackActions.reset({\r\n        index: 0,\r\n        actions: [NavigationActions.navigate({ routeName: 'App' })],\r\n      })\r\n\r\n      setLoading(false)\r\n\r\n      props.navigation.dispatch(resetAction)\r\n    } catch (err) {\r\n      console.log(err)\r\n\r\n      setLoading(false)\r\n      setErrorMessage('Usuário não existe')\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Container>\r\n      <StatusBar barStyle=\"light-content\" />\r\n\r\n      <Title>Bem-vindo</Title>\r\n      <TextInformation>\r\n        Para continuar, precisamos que você informe seu usuário\r\n      </TextInformation>\r\n\r\n      {!!errorMessage && <Error>{errorMessage}</Error>}\r\n\r\n      <Form>\r\n        <Input\r\n          autoCapitalize=\"none\"\r\n          autoCorrect={false}\r\n          placeholder=\"Digite seu usuário\"\r\n          underlineColorAndroid=\"rgba(0, 0, 0, 0)\"\r\n          value={username}\r\n          onChangeText={username => setUsername(username)}\r\n        />\r\n\r\n        <Input\r\n          autoCapitalize=\"none\"\r\n          autoCorrect={false}\r\n          placeholder=\"Digite sua senha\"\r\n          underlineColorAndroid=\"rgba(0, 0, 0, 0)\"\r\n          secureTextEntry={true}\r\n          value={password}\r\n          onChangeText={password => setPassword(password)}\r\n        />\r\n\r\n        <Button onPress={signIn}>\r\n          {loading ? (\r\n            <ActivityIndicator size=\"small\" color=\"#FFF\" />\r\n          ) : (\r\n            <ButtonText>Prosseguir</ButtonText>\r\n          )}\r\n        </Button>\r\n      </Form>\r\n    </Container>\r\n  )\r\n}\r\n\r\nWelcome.navigationOptions = () => {\r\n  return {\r\n    header: null,\r\n  }\r\n}\r\n\r\nWelcome.propTypes = {\r\n  navigation: PropTypes.shape({\r\n    dispatch: PropTypes.func,\r\n  }).isRequired,\r\n}\r\n"]},"metadata":{},"sourceType":"module"}